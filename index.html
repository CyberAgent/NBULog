<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>NBULog by CyberAgent</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>NBULog</h1>
        <p>Log framework based on CocoaLumberjack. Adds dynamic log levels, modules&#39; support and eases usage.</p>

        <p class="view"><a href="https://github.com/CyberAgent/NBULog">View the Project on GitHub <small>CyberAgent/NBULog</small></a></p>


        <ul>
          <li><a href="https://github.com/CyberAgent/NBULog/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/CyberAgent/NBULog/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/CyberAgent/NBULog">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <p><a href="http://cocoadocs.org/docsets/NBULog/"><img src="https://img.shields.io/cocoapods/p/NBULog.svg?style=flat" alt="Platform: iOS/OSX"></a>
<a href="http://cocoadocs.org/docsets/NBULog/"><img src="https://img.shields.io/cocoapods/v/NBULog.svg?style=flat" alt="Version: 1.2.0"></a>
<a href="http://cocoadocs.org/docsets/NBULog/"><img src="https://img.shields.io/cocoapods/l/NBULog.svg?style=flat" alt="License: Apache 2.0"></a>
<a href="https://www.versioneye.com/objective-c/NBULog"><img src="https://www.versioneye.com/objective-c/NBULog/badge.svg?style=flat" alt="Dependency Status"></a>
<a href="https://travis-ci.org/CyberAgent/NBULog"><img src="http://img.shields.io/travis/CyberAgent/NBULog/master.svg?style=flat" alt="Build Status"></a></p>

<p><em>Was part of <a href="https://github.com/CyberAgent/iOS-NBUCore">NBUCore</a> 1.9.x.</em></p>

<h2>
<a name="demo" class="anchor" href="#demo"><span class="octicon octicon-link"></span></a>Demo</h2>

<p>iOS and OS X demo projects are <a href="Demo">included</a> in the repository.</p>

<h2>
<a name="features" class="anchor" href="#features"><span class="octicon octicon-link"></span></a>Features</h2>

<h3>
<a name="dynamic-log-levels" class="anchor" href="#dynamic-log-levels"><span class="octicon octicon-link"></span></a>Dynamic Log Levels</h3>

<p>Instead of handling a <code>ddLogLevel</code> variable set you app log level dynamically. Also works with third party libraries that support NBULog.</p>

<div class="highlight highlight-obj-c"><pre><span class="p">[</span><span class="n">NBULog</span> <span class="nl">setAppLogLevel</span><span class="p">:</span><span class="n">LOG_LEVEL_INFO</span><span class="p">];</span>
<span class="p">[</span><span class="n">NBULog</span> <span class="nl">setKitLogLevel</span><span class="p">:</span><span class="n">LOG_LEVEL_WARN</span><span class="p">];</span> <span class="c1">// When using NBUKit</span>
</pre></div>

<h3>
<a name="modules" class="anchor" href="#modules"><span class="octicon octicon-link"></span></a>Modules</h3>

<p>By default all your sources to <code>APP_MODULE_DEFAULT</code> but you can define your own modules in your <code>prefix.pch</code> file.</p>

<div class="highlight highlight-obj-c"><pre><span class="c1">// Custom log modules</span>
<span class="cp">#define APP_MODULE_NETWORK  1 </span><span class="c1">// APP_MODULE_DEFAULT = 0</span>
<span class="cp">#define APP_MODULE_OTHER    2</span>
</pre></div>

<p>Then just redefine <code>LOG_MODULE</code> for the files that belong to one of your custom modules.</p>

<div class="highlight highlight-obj-c"><pre><span class="cp">#import "MockNetworkModule.h"</span>

<span class="c1">// Define log module for this file</span>
<span class="cp">#undef  LOG_MODULE</span>
<span class="cp">#define LOG_MODULE APP_MODULE_NETWORK</span>
</pre></div>

<p>Also you log a message for a different module than the one your file belongs to:</p>

<div class="highlight highlight-obj-c"><pre><span class="c1">// Send an extra message for another module</span>
<span class="n">NBULogInfoWithModule</span><span class="p">(</span><span class="n">APP_MODULE_OTHER</span><span class="p">,</span> <span class="s">@"Log message from a APP_MODULE_OTHER"</span><span class="p">);</span>
</pre></div>

<p>Finally, you can also modify the log levels of individual modules.</p>

<div class="highlight highlight-obj-c"><pre><span class="c1">// Only log messages from the custom APP_MODULE_NETWORK</span>
<span class="p">[</span><span class="n">NBULog</span> <span class="nl">setAppLogLevel</span><span class="p">:</span><span class="n">LOG_LEVEL_OFF</span><span class="p">];</span>
<span class="p">[</span><span class="n">NBULog</span> <span class="nl">setAppLogLevel</span><span class="p">:</span><span class="n">LOG_LEVEL_INFO</span>
                 <span class="nl">forModule</span><span class="p">:</span><span class="n">APP_MODULE_NETWORK</span><span class="p">];</span>

<span class="p">[</span><span class="n">NBULog</span> <span class="nl">setKitLogLevel</span><span class="p">:</span><span class="n">LOG_LEVEL_WARN</span>
             <span class="nl">forModule</span><span class="p">:</span><span class="n">NBUKIT_MODULE_ADDITIONS</span><span class="p">];</span> <span class="c1">// When using NBUKit</span>

</pre></div>

<h3>
<a name="xcodecolors" class="anchor" href="#xcodecolors"><span class="octicon octicon-link"></span></a>XcodeColors</h3>

<p><img src="http://cyberagent.github.io/NBULog/images/xcodecolors.png" alt="XcodeColors"></p>

<p>When installed, <a href="https://github.com/robbiehanson/XcodeColors">XcodeColors</a> are automatically enabled for the Xcode console.</p>

<h3>
<a name="on-device-log-console-and-gui-to-ajust-levels" class="anchor" href="#on-device-log-console-and-gui-to-ajust-levels"><span class="octicon octicon-link"></span></a>On-Device Log Console and GUI to Ajust Levels</h3>

<p><img src="http://ptez.github.io/LumberjackConsole/images/screenshot2.png" alt="LumberjackConsole 1">ã€€<img src="http://ptez.github.io/LumberjackConsole/images/screenshot3.png" alt="LumberjackConsole 2"></p>

<p>When <a href="https://github.com/PTEz/LumberjackConsole">LumberjackConsole</a> is present you can add am on-device dashboard logger and adjust log levels from the UI.</p>

<div class="highlight highlight-obj-c"><pre><span class="cp">#ifndef MY_PRODUCTION_MACRO</span>
    <span class="c1">// Register custom modules before adding the dashboard</span>
    <span class="p">[</span><span class="n">NBULog</span> <span class="nl">registerAppContextWithModulesAndNames</span><span class="p">:</span><span class="l">@{@(</span><span class="n">APP_MODULE_NETWORK</span><span class="l">)</span>   <span class="o">:</span> <span class="s">@"Network"</span><span class="p">,</span>
                                                    <span class="l">@(</span><span class="n">APP_MODULE_OTHER</span><span class="l">)</span>     <span class="o">:</span> <span class="s">@"Other"</span><span class="l">}</span><span class="p">];</span>

    <span class="c1">// Add dashboard only for testing builds</span>
    <span class="p">[</span><span class="n">NBULog</span> <span class="n">addDashboardLogger</span><span class="p">];</span>
<span class="cp">#endif</span>
</pre></div>

<h2>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>Installation</h2>

<p>Add <code>pod 'NBULog'</code> to your <a href="http://cocoapods.org">CocoaPods</a>' <a href="http://guides.cocoapods.org/syntax/podfile.html">Podfile</a>:</p>

<div class="highlight highlight-ruby"><pre><span class="n">platform</span> <span class="ss">:ios</span><span class="p">,</span> <span class="s1">'5.0'</span>

<span class="n">pod</span> <span class="s1">'NBULog'</span>

<span class="c1"># Optional on-device console</span>
<span class="n">pod</span> <span class="s1">'LumberjackConsole'</span>
</pre></div>

<h2>
<a name="documentation" class="anchor" href="#documentation"><span class="octicon octicon-link"></span></a>Documentation</h2>

<p><a href="http://cocoadocs.org/docsets/NBULog/">http://cocoadocs.org/docsets/NBULog/</a></p>

<h2>
<a name="usage-in-3rd-party-libraries" class="anchor" href="#usage-in-3rd-party-libraries"><span class="octicon octicon-link"></span></a>Usage in 3rd Party Libraries</h2>

<p>You can easily use NBULog in your library when available without making NBULog a requirement.</p>

<h3>
<a name="1-conditionally-use-nbulog" class="anchor" href="#1-conditionally-use-nbulog"><span class="octicon octicon-link"></span></a>1. Conditionally Use NBULog</h3>

<p>...and fallback to CocoaLumberjack or NSLog otherwise.</p>

<p>E.g. from <a href="https://github.com/CyberAgent/iOS-NBUKit">NBUKit</a>'s <a href="https://github.com/CyberAgent/iOS-NBUKit/blob/master/Source/NBUKitPrivate.h"><code>NBUKitPrivate.h</code></a>:</p>

<div class="highlight highlight-obj-c"><pre><span class="c1">//  NBUKitPrivate.h</span>

<span class="c1">// ...</span>

<span class="c1">// a) Use NBULog for logging when available</span>
<span class="cp">#if __has_include("NBULog.h")</span>

<span class="cp">#import "NBULog+NBUKit.h"</span>

<span class="cp">#undef  LOG_CONTEXT</span>
<span class="cp">#define LOG_CONTEXT NBUKIT_LOG_CONTEXT</span>

<span class="cp">#undef  LOG_MODULE</span>
<span class="cp">#define LOG_MODULE  NBUKIT_MODULE_DEFAULT</span>

<span class="cp">#undef  LOG_LEVEL</span>
<span class="cp">#define LOG_LEVEL   [NBULog kitLogLevel]</span>

<span class="c1">// b) Else try CocoaLumberjack</span>
<span class="cp">#elif __has_include("DDLog.h")</span>

<span class="cp">#ifdef DEBUG</span>
<span class="cp">    #define NBUKitLogLevel LOG_LEVEL_VERBOSE</span>
<span class="cp">#else</span>
<span class="cp">    #define NBUKitLogLevel LOG_LEVEL_WARN</span>
<span class="cp">#endif</span>

<span class="cp">#define LOG_LEVEL_DEF   NBUKitLogLevel</span>
<span class="cp">#import &lt;CocoaLumberjack/DDLog.h&gt;</span>

<span class="cp">#define NBULogError(frmt, ...)      DDLogError(frmt, ##__VA_ARGS__)</span>
<span class="cp">#define NBULogWarn(frmt, ...)       DDLogWarn(frmt, ##__VA_ARGS__)</span>
<span class="cp">#define NBULogInfo(frmt, ...)       DDLogInfo(frmt, ##__VA_ARGS__)</span>
<span class="cp">#define NBULogDebug(frmt, ...)      DDLogDebug(frmt, ##__VA_ARGS__)</span>
<span class="cp">#define NBULogVerbose(frmt, ...)    DDLogVerbose(frmt, ##__VA_ARGS__)</span>
<span class="cp">#define NBULogTrace()               NBULogDebug(@"%@", THIS_METHOD)</span>

<span class="c1">// c) Else fallback to NSLog</span>
<span class="cp">#else</span>

<span class="cp">#ifdef DEBUG</span>
<span class="cp">    #define LOG_LEVEL 3</span>
<span class="cp">#else</span>
<span class="cp">    #define LOG_LEVEL 2</span>
<span class="cp">#endif</span>

<span class="cp">#define THIS_METHOD                 NSStringFromSelector(_cmd)</span>
<span class="cp">#define NBULogError(frmt, ...)      do{ if(LOG_LEVEL &gt;= 1) NSLog((frmt), ##__VA_ARGS__); } while(0)</span>
<span class="cp">#define NBULogWarn(frmt, ...)       do{ if(LOG_LEVEL &gt;= 2) NSLog((frmt), ##__VA_ARGS__); } while(0)</span>
<span class="cp">#define NBULogInfo(frmt, ...)       do{ if(LOG_LEVEL &gt;= 3) NSLog((frmt), ##__VA_ARGS__); } while(0)</span>
<span class="cp">#define NBULogDebug(frmt, ...)      do{ if(LOG_LEVEL &gt;= 4) NSLog((frmt), ##__VA_ARGS__); } while(0)</span>
<span class="cp">#define NBULogVerbose(frmt, ...)    do{ if(LOG_LEVEL &gt;= 5) NSLog((frmt), ##__VA_ARGS__); } while(0)</span>
<span class="cp">#define NBULogTrace()               NBULogDebug(@"%@", THIS_METHOD)</span>

<span class="cp">#endif</span>
</pre></div>

<h3>
<a name="2-register-a-log-context-and-optional-modules" class="anchor" href="#2-register-a-log-context-and-optional-modules"><span class="octicon octicon-link"></span></a>2. Register a Log Context and Optional Modules</h3>

<div class="highlight highlight-obj-c"><pre><span class="c1">//  NBULog+NBUKit.h</span>

<span class="cp">#if __has_include("NBULog.h")</span>

<span class="cp">#import &lt;NBULog/NBULog.h&gt;</span>

<span class="c1">// NBUKit log context</span>
<span class="cp">#define NBUKIT_LOG_CONTEXT          110</span>

<span class="c1">// NBUKit modules</span>
<span class="cp">#define NBUKIT_MODULE_DEFAULT       0</span>

<span class="k">@interface</span> <span class="nc">NBULog</span> <span class="nl">(NBUKit)</span>

<span class="c1">// Allow to set and read the current levels.</span>
<span class="p">+</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">kitLogLevel</span><span class="p">;</span>
<span class="p">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setKitLogLevel:</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nv">LOG_LEVEL_XXX</span><span class="p">;</span>

<span class="k">@end</span>

<span class="cp">#endif</span>
</pre></div>

<p>Then register your context and modules if you want them to appear in <a href="https://github.com/PTEz/LumberjackConsole">LumberjackConsole</a>.</p>

<div class="highlight highlight-obj-c"><pre><span class="c1">//  NBULog+NBUKit.m</span>

<span class="cp">#if __has_include("NBULog.h")</span>

<span class="cp">#import "NBULog+NBUKit.h"</span>
<span class="cp">#import &lt;NBULog/NBULogContextDescription.h&gt;</span>

<span class="k">@implementation</span> <span class="nc">NBULog</span> <span class="nl">(NBUKit)</span>

<span class="p">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">load</span>
<span class="p">{</span>
    <span class="c1">// Register the NBUKit log context</span>
    <span class="p">[</span><span class="n">NBULog</span> <span class="nl">registerContextDescription</span><span class="p">:[</span><span class="n">NBULogContextDescription</span> <span class="nl">descriptionWithName</span><span class="p">:</span><span class="s">@"NBUKit"</span>
                                                                             <span class="nl">context</span><span class="p">:</span><span class="n">NBUKIT_LOG_CONTEXT</span>
                                                                     <span class="nl">modulesAndNames</span><span class="p">:</span><span class="nb">nil</span>
                                                                   <span class="nl">contextLevelBlock</span><span class="p">:</span><span class="o">^</span><span class="p">{</span> <span class="k">return</span> <span class="p">[</span><span class="n">NBULog</span> <span class="n">kitLogLevel</span><span class="p">];</span> <span class="p">}</span>
                                                                <span class="nl">setContextLevelBlock</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="kt">int</span> <span class="n">level</span><span class="p">)</span> <span class="p">{</span> <span class="p">[</span><span class="n">NBULog</span> <span class="nl">setKitLogLevel</span><span class="p">:</span><span class="n">level</span><span class="p">];</span> <span class="p">}</span>
                                                          <span class="nl">contextLevelForModuleBlock</span><span class="p">:</span><span class="nb">NULL</span>
                                                       <span class="nl">setContextLevelForModuleBlock</span><span class="p">:</span><span class="nb">NULL</span><span class="p">]];</span>
<span class="p">}</span>

<span class="p">+</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">kitLogLevel</span>
<span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>

<span class="p">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setKitLogLevel:</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nv">LOG_LEVEL_XXX</span>
<span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>

<span class="k">@end</span>

<span class="cp">#endif</span>

</pre></div>

<h2>
<a name="license" class="anchor" href="#license"><span class="octicon octicon-link"></span></a>License</h2>

<pre><code>Copyright 2012-2014 CyberAgent Inc.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License. 
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
</code></pre>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/CyberAgent">CyberAgent</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-40888254-4");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>